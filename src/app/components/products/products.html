<div class="product-card">
  <header class="product-header">
    <div class="title-row">
      <h3 class="name">{{ product()?.Nom }}</h3>
      <div class="price">{{ product()?.Prix }}</div>
    </div>

    <div class="condition-row">
      @if (product()?.leboncoin_url) {
        <div>
          <button (click)="redirectToLeboncoinProductPage()" class="leboncoin-button">Leboncoin</button>
        </div>
      }
      <div>
        <strong>Etat: </strong>
        <span [ngClass]="{
      'condition-neuf': product()?.condition === 'neuf',
      'condition-good': product()?.condition === 'bon',
      'condition-used': product()?.condition === 'usé',
    }">
          {{ product()?.condition }}
        </span>
      </div>

    </div>

    <p class="description">
      {{ product()?.Description }}
    </p>
  </header>

  @if (selectedPhoto()) {
  <div class="media">
    <img class="main-image" [src]="selectedPhoto()!.filename" [alt]="selectedPhoto()!.alt || product()?.Nom"
      loading="lazy" />

    @if (photos().length > 1) {
    <div class="thumbs">
      @for (photo of photos(); track photo.id; let i = $index) {
      <button type="button" class="thumb" [class.is-active]="i === selectedIndex()" (click)="selectPhoto(i)"
        aria-label="Voir l’image {{ i + 1 }}">
        <img [src]="photo.filename" [alt]="photo.alt || product()?.Nom" loading="lazy" />
      </button>
      }
    </div>
    }
  </div>
  } @else {
  <div class="media media--empty">
    <div class="placeholder">Aucune photo disponible</div>
  </div>
  }
</div>